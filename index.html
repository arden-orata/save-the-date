<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Elisa &amp; Arden</title>

  <meta property="og:type"         content="website" />
  <meta property="og:title"        content="Elisa &amp; Arden" />
  <meta property="og:description"  content="â¤ï¸" />
  <meta property="og:image"        content="https://arden-orata.github.io/save-the-date/assets/images/Thumbnail.JPG" />
  <meta property="og:image:width"  content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:url"          content="https://arden-orata.github.io/save-the-date/" />

  <meta name="twitter:card"        content="summary_large_image" />
  <meta name="twitter:title"       content="Elisa &amp; Arden" />
  <meta name="twitter:description" content="â¤ï¸" />
  <meta name="twitter:image"       content="https://arden-orata.github.io/save-the-date/assets/images/Thumbnail.JPG" />

  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,500&family=Great+Vibes&family=Jost:wght@200;300;400;500&display=swap" rel="stylesheet" />

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --brown:       #c8967a;
      --light-brown: #b07858;
      --black:       #1e1e1e;
      --bg:          #fdfbf9;
    }

    html, body {
      min-height: 100%;
    }

    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      font-family: 'Jost', sans-serif;
      overflow-y: auto;
      background: var(--bg);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION 1 â€” Off-white top
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .card {
      text-align: center;
      padding: 0 4rem 5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      width: 100%;
      max-width: 680px;
      background: var(--bg);
      animation: floatIn 1.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
      opacity: 0;
    }

    @keyframes floatIn {
      0%   { opacity: 0; transform: translateY(32px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    .std-block {
      line-height: 1;
      margin-bottom: 3rem;
    }

    .std-save {
      display: block;
      font-family: 'Cormorant Garamond', serif;
      font-weight: 300;
      font-size: clamp(3.5rem, 13vw, 11rem);
      letter-spacing: 0.12em;
      color: var(--brown);
      line-height: 0.95;
    }

    .std-the {
      display: block;
      font-family: 'Great Vibes', cursive;
      font-size: clamp(2.2rem, 7vw, 6rem);
      color: var(--brown);
      line-height: 0.8;
      position: relative;
      right: 2%;
      margin-top: 0.55em;
      margin-bottom: 0.55em;
    }

    .std-date {
      display: block;
      font-family: 'Cormorant Garamond', serif;
      font-weight: 300;
      font-size: clamp(3.5rem, 13vw, 11rem);
      letter-spacing: 0.12em;
      color: var(--brown);
      line-height: 0.95;
    }

    .subtitle {
      font-family: 'Cormorant Garamond', serif;
      font-style: italic;
      font-weight: 500;
      font-size: clamp(1rem, 2.4vw, 1.5rem);
      color: var(--light-brown);
      letter-spacing: 0.06em;
      margin-bottom: 3rem;
    }

    .names {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 600;
      font-size: clamp(1.6rem, 5.2vw, 3.6rem);
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--black);
      margin-bottom: 1rem;
    }

    .date-line {
      font-family: 'Jost', sans-serif;
      font-weight: 400;
      font-size: clamp(1rem, 2.6vw, 1.4rem);
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--black);
      margin-bottom: 1rem;
    }

    .location {
      font-family: 'Cormorant Garamond', serif;
      font-style: italic;
      font-weight: 500;
      font-size: clamp(1rem, 2.4vw, 1.5rem);
      color: var(--light-brown);
      letter-spacing: 0.06em;
    }

    .invitation {
      font-family: 'Cormorant Garamond', serif;
      font-style: italic;
      font-weight: 500;
      font-size: clamp(1rem, 2.4vw, 1.5rem);
      color: var(--light-brown);
      letter-spacing: 0.06em;
      margin-top: 5.25rem;
    }

    .flower {
      margin-top: 0.4em;
      width: 41.65%;
      max-width: 41.65%;
      height: auto;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION 2 â€” Bali background
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .venue-section {
      width: 100%;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 3.5rem 2rem 5rem;
      background-image: url('assets/images/Balibackground.webp');
      background-size: cover;
      background-position: center center;
      background-repeat: no-repeat;
      /* Aspect ratio matches the image (1071 Ã— 2000) so nothing gets cropped */
      aspect-ratio: 1071 / 2000;
    }

    .venue-label {
      font-family: 'Jost', sans-serif;
      font-weight: 400;
      font-size: clamp(1rem, 2.6vw, 1.4rem);
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--black);
      margin-bottom: 1.5rem;
    }

    .venue-name {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 600;
      font-size: clamp(1.6rem, 5vw, 3rem);
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--black);
      margin-bottom: 1.5rem;
      text-align: center;
    }

    .venue-country {
      font-family: 'Cormorant Garamond', serif;
      font-style: italic;
      font-weight: 500;
      font-size: clamp(1rem, 2.4vw, 1.5rem);
      color: var(--black);
      letter-spacing: 0.06em;
      margin-bottom: 2.5rem;
    }

    .map-link {
      display: block;
      width: 70%;
      aspect-ratio: 1 / 1;
      border-radius: 4px;
      overflow: hidden;
      box-shadow: 0 4px 24px rgba(0,0,0,0.18);
      text-decoration: none;
      cursor: pointer;
      position: relative;
    }

    .map-link iframe {
      display: block;
      width: 100%;
      height: calc(100% + 144px);
      border: 0;
      pointer-events: none;
      position: absolute;
      top: -72px;
      left: 0;
    }

    @media (max-width: 480px) {
      .card           { padding: 0 1.5rem 3rem; }
      .map-link       { width: 90%; }
    }
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION 3 â€” Itinerary
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .itinerary-section {
      width: 100%;
      background: var(--bg);
      display: flex;
      flex-direction: column;
      justify-content: center;
      /* Fills exactly one screen height */
      min-height: 100vh;
      padding: 0 15% 0;
      box-sizing: border-box;
    }

    .day-heading {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 300;
      font-size: clamp(3.5rem, 13vw, 11rem);
      letter-spacing: 0.12em;
      color: var(--brown);
      line-height: 0.95;
      margin-bottom: 0.6rem;
      margin-top: 1.5rem;
    }

    .day-number {
      font-size: clamp(4.725rem, 17.55vw, 14.85rem);
      vertical-align: baseline;
    }

    .day-heading:first-child {
      margin-top: 0;
    }

    .event-title {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 600;
      font-size: clamp(1.6rem, 5.2vw, 3.6rem);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--black);
      line-height: 1.1;
      margin-bottom: 0.3rem;
    }

    .event-body {
      font-family: 'Cormorant Garamond', serif;
      font-style: italic;
      font-weight: 500;
      font-size: clamp(0.85rem, 2vw, 1.1rem);
      color: var(--light-brown);
      letter-spacing: 0.04em;
      line-height: 1.6;
      margin-bottom: 1rem;
      max-width: 42ch;
    }

    .day-divider {
      width: 2rem;
      height: 1px;
      background: var(--brown);
      opacity: 0.4;
      margin: 1.8rem 0;
    }

    .day-heading--right,
    .event-title--right,
    .event-body--right {
      text-align: right;
    }

    .event-body--right {
      max-width: 42ch;
      margin-left: auto;
      margin-right: 0;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION 4 â€” RSVP Form
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .rsvp-section {
      width: 100%;
      background: var(--bg);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 4rem 15% 5rem;
      box-sizing: border-box;
    }

    .rsvp-heading {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 300;
      font-size: clamp(3.5rem, 13vw, 11rem);
      letter-spacing: 0.12em;
      color: var(--brown);
      line-height: 0.95;
      margin-bottom: 2.5rem;
      align-self: flex-start;
    }

    .rsvp-form {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }

    .form-row {
      display: flex;
      gap: 1rem;
      width: 100%;
    }

    .form-field {
      display: flex;
      flex-direction: column;
      flex: 1;
      gap: 0.4rem;
    }

    .form-field label {
      font-family: 'Cormorant Garamond', serif;
      font-style: italic;
      font-weight: 500;
      font-size: clamp(1rem, 2.4vw, 1.5rem);
      letter-spacing: 0.06em;
      color: var(--light-brown);
      text-transform: none;
    }

    .form-field input,
    .form-field select,
    .form-field textarea {
      font-family: 'Jost', sans-serif;
      font-weight: 400;
      font-size: clamp(1rem, 2.6vw, 1.4rem);
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--black);
      background: transparent;
      border: none;
      border-bottom: 1px solid #d4b8a8;
      padding: 0.4rem 0;
      outline: none;
      width: 100%;
      border-radius: 0;
      -webkit-appearance: none;
      appearance: none;
      transition: border-color 0.2s;
    }

    .form-field input:focus,
    .form-field select:focus {
      border-bottom-color: var(--brown);
    }

    .form-field select {
      cursor: pointer;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23c8967a' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 0.5rem center;
      padding-right: 1.5rem;
    }

    .radio-label {
      font-family: 'Jost', sans-serif;
      font-weight: 400;
      font-size: clamp(1rem, 2.6vw, 1.4rem);
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--black);
    }

    .mobile-row {
      display: flex;
      gap: 0.75rem;
      align-items: flex-end;
    }

    .mobile-row .country-code {
      flex: 0 0 38%;
    }

    .mobile-row .phone-number {
      flex: 1;
    }

    .dietary-row {
      display: flex;
      gap: 1rem;
      align-items: flex-end;
    }

    .dietary-row .dietary-select {
      flex: 1;
    }

    .dietary-row .dietary-other {
      flex: 1;
      display: none;
    }

    .dietary-row .dietary-other.visible {
      display: flex;
    }

    .submit-btn {
      margin-top: 1.5rem;
      align-self: flex-start;
      font-family: 'Jost', sans-serif;
      font-weight: 400;
      font-size: clamp(0.85rem, 2vw, 1rem);
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--bg);
      background: var(--brown);
      border: none;
      padding: 0.9rem 2.5rem;
      cursor: pointer;
      transition: background 0.2s;
    }

    .submit-btn:hover {
      background: var(--light-brown);
    }

    .attendance-options {
      display: flex;
      gap: 2rem;
      margin-top: 0.6rem;
    }

    .radio-option {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      cursor: pointer;
      font-family: 'Cormorant Garamond', serif;
      font-size: clamp(1rem, 2.4vw, 1.2rem);
      color: var(--black);
      user-select: none;
    }

    .radio-option input[type="radio"] {
      display: none;
    }

    .radio-custom {
      width: 16px;
      height: 16px;
      border: 1.5px solid #d4b8a8;
      border-radius: 50%;
      display: inline-block;
      flex-shrink: 0;
      position: relative;
      transition: border-color 0.2s;
    }

    .radio-option input[type="radio"]:checked + .radio-custom {
      border-color: var(--brown);
    }

    .radio-option input[type="radio"]:checked + .radio-custom::after {
      content: '';
      width: 8px;
      height: 8px;
      background: var(--brown);
      border-radius: 50%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .radio-option.inactive .radio-label {
      color: #c8b8b0;
    }

    .radio-option.inactive .radio-custom {
      border-color: #e0d0c8;
    }

    #attending-fields {
      display: none;
      flex-direction: column;
      gap: 1.2rem;
      width: 100%;
    }

    #attending-fields.visible {
      display: flex;
    }

    .submit-btn:disabled {
      background: #d4b8a8;
      cursor: not-allowed;
    }

    .form-field input::placeholder {
      color: #c8b8b0;
      font-style: italic;
      text-transform: none;
      letter-spacing: 0.05em;
    }

    @media (max-width: 480px) {
      .rsvp-section { padding: 3rem 1.5rem 4rem; }
      .form-row { flex-direction: column; }
      .attendance-options { flex-direction: column; gap: 1rem; }
    }

  </style>
</head>
<body>

  <!-- â”€â”€ Section 1: Save the Date â”€â”€ -->
  <div class="card" style="margin-top: 9vh;">

    <div class="std-block">
      <span class="std-save">SAVE</span>
      <span class="std-the">the</span>
      <span class="std-date">DATE</span>
    </div>

    <p class="subtitle">for the wedding of</p>
    <p class="names">ELISA &amp; ARDEN</p>
    <p class="date-line">AUGUST 21<span style="position: relative; bottom: 0.08em;">â€“</span>22, 2027</p>
    <p class="location">Bali, Indonesia</p>
    <p class="invitation">formal invitation to follow</p>

    <img
      class="flower"
      src="assets/images/Flower.PNG"
      alt=""
      role="presentation"
      loading="lazy"
      decoding="async"
    />

  </div>

  <!-- â”€â”€ Section 2: Venue + Map â”€â”€ -->
  <section class="venue-section">

    <p class="venue-label">venue</p>
    <p class="venue-name">Jumeirah Bali</p>
    <p class="venue-country">Indonesia</p>

    <a
      class="map-link"
      href="https://maps.google.com/?q=Jumeirah+Bali"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Open Jumeirah Bali in Google Maps"
    >
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d31542!2d115.11803017541776!3d-8.77905608996164!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2dd245154692a1bb%3A0xc52a931844d71a28!2sJumeirah%20Bali!5e0!3m2!1sen!2sus!4v1772218940488!5m2!1sen!2sus"
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"
        title="Jumeirah Bali location map"
      ></iframe>
    </a>

  </section>
  <!-- â”€â”€ Section 3: Itinerary â”€â”€ -->
  <section class="itinerary-section">

    <!-- Schedule heading -->
    <p class="venue-label" style="margin-bottom: 1.4rem;">SCHEDULE</p>

    <!-- Day 1 -->
    <p class="day-heading">Day <span class="day-number">1</span></p>

    <p class="event-title">Welcome Dinner</p>
    <p class="event-body" style="margin-bottom: 3rem;">Wine and dine with friends and family.<br>Meet everyone over candlelit tables<br>and colorful sunset by the beach<br>with live music and Bali festivities.</p>

    <p class="day-heading day-heading--right">Day <span class="day-number">2</span></p>

    <p class="event-title event-title--right">Ceremony</p>
    <p class="event-title event-title--right">Cocktail Hour</p>
    <p class="event-title event-title--right">Reception</p>
    <p class="event-title event-title--right">After Party</p>

    <p class="event-body event-body--right">Celebrate love, warmth, and joy<br>with the people who matter most.<br>Raise a glass and savor every moment<br>as the night settles into memory.</p>

  </section>

  <!-- â”€â”€ Section 4: RSVP â”€â”€ -->
  <section class="rsvp-section">

    <p class="rsvp-heading">RSVP</p>

    <div class="rsvp-form">

      <!-- First & Last Name -->
      <div class="form-row">
        <div class="form-field">
          <label for="firstname">First Name</label>
          <input
            type="text"
            id="firstname"
            name="firstname"
            autocomplete="given-name"
            inputmode="text"
          />
        </div>
        <div class="form-field">
          <label for="lastname">Last Name</label>
          <input
            type="text"
            id="lastname"
            name="lastname"
            autocomplete="family-name"
            inputmode="text"
          />
        </div>
      </div>

      <!-- Attendance -->
      <div class="form-field" id="attendance-block" style="display:none; margin-top: 0.5rem;">
        <label>Attendance</label>
        <div class="attendance-options">
          <label class="radio-option" id="radio-yes">
            <input type="radio" name="attendance" value="yes" id="att-yes" />
            <span class="radio-custom"></span>
            <span class="radio-label">YES, Attending</span>
          </label>
          <label class="radio-option" id="radio-no">
            <input type="radio" name="attendance" value="no" id="att-no" />
            <span class="radio-custom"></span>
            <span class="radio-label">NO, Unable to Attend</span>
          </label>
        </div>
      </div>

      <!-- Guest not found error -->
      <p id="guest-error" style="display:none; font-family:'Cormorant Garamond',serif; font-style:italic; color:#c0392b; font-size:clamp(0.9rem,2vw,1.1rem); margin-top:0.5rem;">
        We couldn't find your name on the guest list. Please check your entry.
      </p>

      <!-- Plus One radio (shown only if guest has plus one entitlement and is attending) -->
      <div class="form-field" id="plus-one-block" style="display:none;">
        <label>Plus One</label>
        <div class="attendance-options">
          <label class="radio-option" id="radio-plus-yes">
            <input type="radio" name="plus_one" value="yes" id="plus-yes" />
            <span class="radio-custom"></span>
            <span class="radio-label">Yes, I'm bringing someone</span>
          </label>
          <label class="radio-option" id="radio-plus-no">
            <input type="radio" name="plus_one" value="no" id="plus-no" />
            <span class="radio-custom"></span>
            <span class="radio-label">No, just me</span>
          </label>
        </div>
      </div>

      <!-- Fields shown only if attending -->
      <div id="attending-fields">

        <!-- Plus One name + dietary (shown only if bringing someone) -->
        <div id="plus-one-fields" style="display:none; flex-direction:column; gap:1.2rem; width:100%;">
          <div class="form-row">
            <div class="form-field">
              <label for="plus-firstname">Plus One First Name</label>
              <input type="text" id="plus-firstname" name="plus_firstname" autocomplete="off" inputmode="text" />
            </div>
            <div class="form-field">
              <label for="plus-lastname">Plus One Last Name</label>
              <input type="text" id="plus-lastname" name="plus_lastname" autocomplete="off" inputmode="text" />
            </div>
          </div>
          <div class="form-field">
            <label>Plus One Dietary Restriction</label>
            <div class="dietary-row">
              <div class="form-field dietary-select">
                <select id="plus-dietary" name="plus_dietary" aria-label="Plus one dietary restriction">
                  <option value="none">None</option>
                  <option value="vegetarian">Vegetarian</option>
                  <option value="vegan">Vegan</option>
                  <option value="gluten-free">Gluten-Free</option>
                  <option value="halal">Halal</option>
                  <option value="kosher">Kosher</option>
                  <option value="nut-allergy">Nut Allergy</option>
                  <option value="dairy-free">Dairy-Free</option>
                  <option value="seafood-allergy">Seafood Allergy</option>
                  <option value="others">Others</option>
                </select>
              </div>
              <div class="form-field dietary-other" id="plus-dietary-other-field">
                <input type="text" id="plus-dietary-other" name="plus_dietary_other" placeholder="Add your other restriction here" />
              </div>
            </div>
          </div>
        </div>

      <!-- Mobile -->
      <div class="form-field">
        <label>Mobile Number</label>
        <div class="mobile-row">
          <div class="form-field country-code">
            <select id="country-code" name="country_code" aria-label="Country code">
              <option value="+62">ğŸ‡®ğŸ‡© +62 Indonesia</option>
              <option value="+1">ğŸ‡ºğŸ‡¸ +1 United States</option>
              <option value="+44">ğŸ‡¬ğŸ‡§ +44 United Kingdom</option>
              <option value="+61">ğŸ‡¦ğŸ‡º +61 Australia</option>
              <option value="+65">ğŸ‡¸ğŸ‡¬ +65 Singapore</option>
              <option value="+60">ğŸ‡²ğŸ‡¾ +60 Malaysia</option>
              <option value="+63">ğŸ‡µğŸ‡­ +63 Philippines</option>
              <option value="+66">ğŸ‡¹ğŸ‡­ +66 Thailand</option>
              <option value="+84">ğŸ‡»ğŸ‡³ +84 Vietnam</option>
              <option value="+82">ğŸ‡°ğŸ‡· +82 South Korea</option>
              <option value="+81">ğŸ‡¯ğŸ‡µ +81 Japan</option>
              <option value="+86">ğŸ‡¨ğŸ‡³ +86 China</option>
              <option value="+91">ğŸ‡®ğŸ‡³ +91 India</option>
              <option value="+971">ğŸ‡¦ğŸ‡ª +971 UAE</option>
              <option value="+966">ğŸ‡¸ğŸ‡¦ +966 Saudi Arabia</option>
              <option value="+33">ğŸ‡«ğŸ‡· +33 France</option>
              <option value="+49">ğŸ‡©ğŸ‡ª +49 Germany</option>
              <option value="+39">ğŸ‡®ğŸ‡¹ +39 Italy</option>
              <option value="+34">ğŸ‡ªğŸ‡¸ +34 Spain</option>
              <option value="+31">ğŸ‡³ğŸ‡± +31 Netherlands</option>
            </select>
          </div>
          <div class="form-field phone-number">
            <input type="tel" id="phone" name="phone" inputmode="numeric" placeholder="812 3456 7890" autocomplete="tel-national" />
          </div>
        </div>
      </div>

      <!-- Email -->
      <div class="form-field">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" autocomplete="email" inputmode="email" placeholder="you@example.com" />
      </div>

      <!-- Dietary Restriction -->
      <div class="form-field">
        <label>Dietary Restriction</label>
        <div class="dietary-row">
          <div class="form-field dietary-select">
            <select id="dietary" name="dietary" aria-label="Dietary restriction">
              <option value="none">None</option>
              <option value="vegetarian">Vegetarian</option>
              <option value="vegan">Vegan</option>
              <option value="gluten-free">Gluten-Free</option>
              <option value="halal">Halal</option>
              <option value="kosher">Kosher</option>
              <option value="nut-allergy">Nut Allergy</option>
              <option value="dairy-free">Dairy-Free</option>
              <option value="seafood-allergy">Seafood Allergy</option>
              <option value="others">Others</option>
            </select>
          </div>
          <div class="form-field dietary-other" id="dietary-other-field">
            <input type="text" id="dietary-other" name="dietary_other" placeholder="Add your other restriction here" />
          </div>
        </div>
      </div>

      </div> <!-- /attending-fields -->

      <!-- Submit -->
      <button type="button" class="submit-btn" id="submit-btn" disabled>Submit</button>

    </div>

  </section>

</body>
</html>

<script>
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbz4lc6d6Z51bB2AJpdT0vxGMzlEIawrCHZBDZadFRNMFAU9jzLtd9mG-Z4wcBLeNt_S/exec";

  // â”€â”€ Helpers â”€â”€
  function toTitleCase(str) {
    return str.replace(/\w\S*/g, w => w.charAt(0).toUpperCase() + w.slice(1).toLowerCase());
  }

  function jsonp(params, callbackName) {
    return new Promise((resolve, reject) => {
      const query = Object.entries(params)
        .map(([k, v]) => encodeURIComponent(k) + '=' + encodeURIComponent(v))
        .join('&');
      window[callbackName] = function(data) {
        delete window[callbackName];
        document.getElementById('jsonp-' + callbackName)?.remove();
        resolve(data);
      };
      const script   = document.createElement('script');
      script.id      = 'jsonp-' + callbackName;
      script.src     = SCRIPT_URL + '?' + query + '&callback=' + callbackName;
      script.onerror = () => {
        delete window[callbackName];
        script.remove();
        reject(new Error('JSONP failed'));
      };
      document.head.appendChild(script);
    });
  }

  // â”€â”€ Element refs â”€â”€
  const attYes          = document.getElementById("att-yes");
  const attNo           = document.getElementById("att-no");
  const radioYes        = document.getElementById("radio-yes");
  const radioNo         = document.getElementById("radio-no");
  const attendanceBlock = document.getElementById("attendance-block");
  const attendingFields = document.getElementById("attending-fields");
  const guestError      = document.getElementById("guest-error");
  const plusOneBlock    = document.getElementById("plus-one-block");
  const plusOneFields   = document.getElementById("plus-one-fields");
  const plusYes         = document.getElementById("plus-yes");
  const plusNo          = document.getElementById("plus-no");
  const submitBtn       = document.getElementById("submit-btn");

  let guestFound   = false;
  let guestPlusOne = false;

  // â”€â”€ Title case on blur â”€â”€
  ["firstname", "lastname", "plus-firstname", "plus-lastname"].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.addEventListener("blur", () => { el.value = toTitleCase(el.value.trim()); });
  });

  // â”€â”€ Phone digits only â”€â”€
  document.getElementById("phone").addEventListener("input", function () {
    this.value = this.value.replace(/\D/g, "");
  });

  // â”€â”€ Reset form state â”€â”€
  function resetForm() {
    guestFound   = false;
    guestPlusOne = false;
    guestError.style.display      = "none";
    attendanceBlock.style.display = "none";
    attendingFields.classList.remove("visible");
    plusOneBlock.style.display    = "none";
    plusOneFields.style.display   = "none";
    [attYes, attNo, plusYes, plusNo].forEach(r => r.checked = false);
    ["radio-yes", "radio-no", "radio-plus-yes", "radio-plus-no"].forEach(id => {
      const el = document.getElementById(id);
      if (el) el.classList.remove("inactive");
    });
    submitBtn.disabled = true;
  }

  // â”€â”€ Preload guest list from local JSON (fast, same-origin) â”€â”€
  let guestList    = [];
  let guestLoaded  = false;
  let lookupTimer  = null;

  fetch("assets/data/guests.json")
    .then(r => r.json())
    .then(data => {
      guestList   = (data.guests || []).map(g => ({
        firstname: g.firstname.trim().toLowerCase(),
        lastname:  g.lastname.trim().toLowerCase(),
        plus_one:  g.plus_one.trim()
      }));
      guestLoaded = true;
    })
    .catch(err => console.warn("Could not load guest list:", err));

  // â”€â”€ Instant in-memory lookup â”€â”€
  function doLookup() {
    const firstname = document.getElementById("firstname").value.trim().toLowerCase();
    const lastname  = document.getElementById("lastname").value.trim().toLowerCase();
    resetForm();
    if (!firstname || !lastname) return;

    const match = guestList.find(g => g.firstname === firstname && g.lastname === lastname);
    if (match) {
      guestFound   = true;
      guestPlusOne = match.plus_one.toLowerCase().includes("yes");
      attendanceBlock.style.display = "block";
    } else {
      guestError.style.display = "block";
    }
  }

  document.getElementById("lastname").addEventListener("blur", function () {
    clearTimeout(lookupTimer);
    doLookup();
  });

  document.getElementById("lastname").addEventListener("input", function () {
    clearTimeout(lookupTimer);
    lookupTimer = setTimeout(doLookup, 400);
  });

  document.getElementById("firstname").addEventListener("blur", function () {
    const lastname = document.getElementById("lastname").value.trim();
    if (lastname) doLookup();
  });

  // â”€â”€ Attendance radios â”€â”€
  attYes.addEventListener("change", function () {
    if (!this.checked) return;
    attendingFields.classList.add("visible");
    radioNo.classList.add("inactive");
    radioYes.classList.remove("inactive");
    if (guestPlusOne) plusOneBlock.style.display = "block";
    checkValidity();
  });

  attNo.addEventListener("change", function () {
    if (!this.checked) return;
    attendingFields.classList.remove("visible");
    plusOneBlock.style.display  = "none";
    plusOneFields.style.display = "none";
    radioYes.classList.add("inactive");
    radioNo.classList.remove("inactive");
    checkValidity();
  });

  // â”€â”€ Plus one radios â”€â”€
  plusYes.addEventListener("change", function () {
    if (!this.checked) return;
    plusOneFields.style.display = "flex";
    document.getElementById("radio-plus-no").classList.add("inactive");
    document.getElementById("radio-plus-yes").classList.remove("inactive");
    checkValidity();
  });

  plusNo.addEventListener("change", function () {
    if (!this.checked) return;
    plusOneFields.style.display = "none";
    document.getElementById("radio-plus-yes").classList.add("inactive");
    document.getElementById("radio-plus-no").classList.remove("inactive");
    checkValidity();
  });

  // â”€â”€ Dietary others toggle â”€â”€
  document.getElementById("dietary").addEventListener("change", function () {
    document.getElementById("dietary-other-field").classList.toggle("visible", this.value === "others");
    if (this.value !== "others") document.getElementById("dietary-other").value = "";
    checkValidity();
  });

  document.getElementById("plus-dietary").addEventListener("change", function () {
    document.getElementById("plus-dietary-other-field").classList.toggle("visible", this.value === "others");
    if (this.value !== "others") document.getElementById("plus-dietary-other").value = "";
    checkValidity();
  });

  // â”€â”€ Input listeners â”€â”€
  ["firstname", "lastname", "phone", "email", "dietary-other", "plus-firstname", "plus-lastname", "plus-dietary-other"].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.addEventListener("input", checkValidity);
  });

  // â”€â”€ Validity check â”€â”€
  function checkValidity() {
    if (!guestFound) { submitBtn.disabled = true; return; }
    if (attNo.checked) { submitBtn.disabled = false; return; }
    if (!attYes.checked) { submitBtn.disabled = true; return; }

    const emailRe   = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    const firstname = document.getElementById("firstname").value.trim();
    const lastname  = document.getElementById("lastname").value.trim();
    const phone     = document.getElementById("phone").value.trim();
    const email     = document.getElementById("email").value.trim();
    const dietary   = document.getElementById("dietary").value;
    const otherOk   = dietary !== "others" || document.getElementById("dietary-other").value.trim().length > 0;

    if (!firstname || !lastname || !phone || !emailRe.test(email) || !otherOk) {
      submitBtn.disabled = true; return;
    }

    if (guestPlusOne && plusOneBlock.style.display !== "none") {
      if (!plusYes.checked && !plusNo.checked) { submitBtn.disabled = true; return; }
      if (plusYes.checked) {
        const pFirst   = document.getElementById("plus-firstname").value.trim();
        const pLast    = document.getElementById("plus-lastname").value.trim();
        const pDiet    = document.getElementById("plus-dietary").value;
        const pOtherOk = pDiet !== "others" || document.getElementById("plus-dietary-other").value.trim().length > 0;
        if (!pFirst || !pLast || !pOtherOk) { submitBtn.disabled = true; return; }
      }
    }

    submitBtn.disabled = false;
  }

  // â”€â”€ Submit via JSONP â”€â”€
  submitBtn.addEventListener("click", async function () {
    const isAttending  = attYes.checked;
    const bringingPlus = isAttending && plusYes.checked;

    const params = {
      action:             "submit",
      attending:          isAttending ? "Yes" : "No",
      firstname:          isAttending ? document.getElementById("firstname").value.trim()  : "",
      lastname:           isAttending ? document.getElementById("lastname").value.trim()   : "",
      phone:              isAttending ? document.getElementById("country-code").value + document.getElementById("phone").value.trim() : "",
      email:              isAttending ? document.getElementById("email").value.trim()      : "",
      dietary:            isAttending ? document.getElementById("dietary").value           : "",
      dietary_other:      isAttending ? document.getElementById("dietary-other").value.trim() : "",
      plus_one:           isAttending && guestPlusOne ? (bringingPlus ? "Yes" : "No") : "",
      plus_firstname:     bringingPlus ? document.getElementById("plus-firstname").value.trim()     : "",
      plus_lastname:      bringingPlus ? document.getElementById("plus-lastname").value.trim()      : "",
      plus_dietary:       bringingPlus ? document.getElementById("plus-dietary").value              : "",
      plus_dietary_other: bringingPlus ? document.getElementById("plus-dietary-other").value.trim() : ""
    };

    submitBtn.disabled    = true;
    submitBtn.textContent = "Sending...";

    try {
      const data = await jsonp(params, "submit_" + Date.now());
      console.log("Submit response:", data);
      submitBtn.textContent = "Submit";
      alert(isAttending
        ? "Thank you! We look forward to celebrating with you."
        : "We\'re sorry you\'re unable to make it. Thank you for letting us know.");
    } catch (err) {
      console.error("Submit error:", err);
      submitBtn.disabled    = false;
      submitBtn.textContent = "Submit";
      alert("Something went wrong. Please try again.");
    }
  });
</script>
